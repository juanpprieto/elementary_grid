(this.webpackJsonpelementary_grid=this.webpackJsonpelementary_grid||[]).push([[0],{24:function(e,t,n){},26:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var c=n(3),r=n.n(c),a=n(18),s=n.n(a),i=n(14),o=n(1),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=1/(e/60);return 4*n/t*1e3},l=function(e){var t=["c","c#","d","d#","e","f","f#","g","g#","a","a#","b"],n=e.split(""),c=Object(o.a)(n,2),r=c[0],a=c[1];return t.indexOf(r)<0?-1:12*Number(a)+t.indexOf(r)},b=function(e){return e<0?0:440*Math.pow(2,(e-69)/12)},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(i.a)(Array.from(Array(e).keys()).map((function(e){return e+t})))},f=n(4),h=n(15),j=n(19),m=n.n(j),p=(n(24),n(2)),v=function(e){var t=e.hasHilight,n=e.note,c=e.onToggle,r=e.state,a=e.step,s=Object(h.a)(e,["hasHilight","note","onToggle","state","step"]),i=m()({"gs-key":!0,"gs-key--is-active":r,"gs-key--has-hilight":t}),o={"--step":a,"--note":n};return Object(p.jsx)("div",Object(f.a)({className:i,style:o,onClick:function(){return c(n)}},s))},g=function(e){var t=[];return d(e.length).forEach((function(n){d(e[0].length).forEach((function(c){var r=1===e[n][c];t.push({key:"".concat(n,"_").concat(c,"_").concat(r?"on":"off"),note:n,step:c,state:r})}))})),t},O=function(e){var t=e.notes,n=e.hilightStep,r=e.onToggleNote,a=e.onClear,s=Object(c.useState)("none"),i=Object(o.a)(s,2),u=i[0],l=i[1],b=function(){return l("none")};Object(c.useEffect)((function(){return document.addEventListener("mouseup",b),function(){document.removeEventListener("mouseup",b)}}));var d={"--columns":t[0].length,"--rows":t.length},f={"--cursor":n};return Object(p.jsxs)("div",{className:"gs-grid",children:[Object(p.jsxs)("div",{className:"gs-grid__field",style:d,children:[g(t).map((function(e){var n=e.key,c=e.note,a=e.step,s=e.state;return Object(p.jsx)(v,{note:c,step:a,state:s,onToggle:function(){return r(c,a,s?0:1)},onMouseEnter:function(){return"none"!==u&&function(e,n){"fill"===u&&0===t[e][n]&&r(e,n,1),"clear"===u&&1===t[e][n]&&r(e,n,0)}(c,a)},onMouseDown:function(){return function(e,n){0===t[e][n]?(r(e,n,1),l("fill")):(r(e,n,0),l("clear"))}(c,a)}},n)})),Object(p.jsx)("div",{className:"gs-grid__cursor",style:f})]}),Object(p.jsx)("div",{className:"gs-grid__toolbar",children:Object(p.jsx)("button",{onClick:a,children:"Clear"})})]})},y=(n(26),function(){return Object(p.jsxs)("div",{className:"splainer",children:[Object(p.jsxs)("span",{children:["Made with ",Object(p.jsx)("a",{href:"https://www.elementary.audio/",children:"Elementary Audio"})]}),Object(p.jsxs)("span",{children:["Source on ",Object(p.jsx)("a",{href:"https://github.com/teetow/elementary_grid",children:"GitHub"})]}),Object(p.jsxs)("span",{children:["Check out my ",Object(p.jsx)("a",{href:"https://soundcloud.com/teetow",children:"SoundCloud"})," =)"]})]})}),k=n(5),x=n.n(k),w=n(10),_=n(0),N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.gain,c=void 0===n?1:n,r=t.detune,a=void 0===r?.005:r,s=t.sharpness,i=void 0===s?1:s,o=function(e,t){return _.b.mul(t,_.b.add(_.b.sin(_.b.mul(2*Math.PI,e)),_.b.sin(_.b.mul(3*Math.PI,e,.1*i))))},u=_.b.add(_.b.mul(o(_.b.phasor(e*(1-a)),.6)),_.b.mul(o(_.b.phasor(1*e),.6)),_.b.mul(o(_.b.phasor(e*(1+a)),.6)));return u=_.b.highpass(70,1,u),_.b.mul(c,u)};N.desc="Not quite a supersaw, but certainly a stabby little rascal";var C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.gain,c=void 0===n?1:n,r=t.richness,a=void 0===r?.7:r,s=t.detune,i=void 0===s?.004:s;return _.b.tanh(_.b.mul(8*c,_.b.add(_.b.mul(.9*a,_.b.cycle(e*(1-i))),_.b.mul(.9*a,_.b.cycle(e*(1+i))))))};C.desc="Pseudo-FM bell-like patch with a sprinkle of unpredictability";var S,T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.freq,c=void 0===n?50:n,r=t.speed,a=void 0===r?1:r,s=t.pop,i=void 0===s?1:s,o=_.b.adsr(.005,.3*a,0,0,e),u=_.b.adsr(1e-4,.2*a,0,0,e),l=_.b.adsr(1e-4,.5,0,0,e),b=_.b.add(1,_.b.mul(2*i,u));b=_.b.add(0,_.b.mul(.5*i,l),b);var d=_.b.cycle(_.b.mul(b,c)),f=_.b.tanh(_.b.mul(1.5,o,d));return f=_.b.highpass(c,8.4,f)};S||(console.log("creating a new AudioContext"),S=new AudioContext);var E={stab:N,ding:C,kick:T},A=(n(30),function(e){var t=e.active,n=e.setActive;return Object(p.jsxs)("div",{className:"eg-synth__option eg-synth__kick-switch",children:[Object(p.jsx)("input",{className:"eg-synth__switch",type:"checkbox",id:"kick",checked:t,onChange:function(){return n(!t)}}),Object(p.jsx)("label",{htmlFor:"kick",children:"Kick"})]})}),M=[{name:"stab",label:"Stab"},{name:"ding",label:"Ding"}],q=function(e){var t=e.currentTone,n=e.onSetTone;return Object(p.jsx)("div",{className:"eg-synth__tone-picker",children:M.map((function(e){return Object(p.jsxs)("div",{className:"eg-synth__option",children:[Object(p.jsx)("input",{type:"radio",className:"eg-synth__led",id:e.name,value:e.name,checked:e.name===t,onChange:function(){return n(e.name)}}),Object(p.jsx)("label",{htmlFor:e.name,children:e.label})]},e.name)}))})};var I=function(e){var t=e.scale,n=e.sequence,r=e.onTick,a=Object(c.useState)("stab"),s=Object(o.a)(a,2),i=s[0],l=s[1],f=Object(c.useState)(!1),h=Object(o.a)(f,2),j=h[0],m=h[1];return function(e){var t=e.tracks,n=e.scale,r=e.onTick,a=e.withKick,s=void 0===a||a,i=e.bpm,l=void 0===i?120:i,b=e.tone,f=void 0===b?"ding":b,h=Object(c.useState)(!1),j=Object(o.a)(h,2),m=j[0],p=j[1],v=Object(c.useRef)(_.b.metro({name:"tick",interval:u(l,16)})).current,g=Object(c.useRef)(_.b.metro({name:"beat",interval:u(l,4)})).current,O=Object(c.useRef)(_.b.metro({name:"sync",interval:u(l,1)})).current,y=Object(c.useRef)(0);Object(c.useEffect)((function(){!function(){var e=Object(w.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.initialize(S,{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[4]});case 2:e.sent.connect(S.destination),p(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),Object(c.useEffect)((function(){_.a.on("metro",(function(e){"sync"===e.source&&(y.current=-1),"tick"===e.source&&(y.current=y.current+1,r(y.current))}))}),[]);var k=Object(c.useCallback)(Object(w.a)(x.a.mark((function e(){var c,r,a,i,o,b,h,j;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("suspended"!==S.state){e.next=3;break}return e.next=3,S.resume();case 3:if(m&&"running"===S.state)try{c=function(e){return _.b.seq({seq:t[e],loop:!1},v,O)},r=function(e){return _.b.adsr(.01,.3,.1,1,c(e))},a=function(e){return E[f](e,{gain:.8})},i=function(e){return a(n[e])},o=function(e){return _.b.mul(r(e),i(e))},b=_.b.add(_.b.add(d(4,0).map(o)),_.b.add(d(4,4).map(o)),_.b.add(d(4,8).map(o)),_.b.add(d(4,12).map(o))),h=_.b.delay({size:44100},_.b.ms2samps(3*u(l,16)),-.3,b),b=_.b.add(_.b.mul(.9,b),_.b.mul(.4,h)),b=_.b.tanh(b),s&&(j=T(g,{pop:1.3}),b=_.b.add(b,j)),b=_.b.add(_.b.mul(0,v),_.b.mul(0,g),_.b.mul(0,O),b),_.a.render(b,b)}catch(p){console.log(p)}case 4:case"end":return e.stop()}}),e)}))),[g,O,v,l,m,t,n,f,s]);Object(c.useEffect)((function(){k()}),[k,t])}({tracks:n,scale:t.map(b),onTick:r,tone:i,withKick:j}),Object(p.jsxs)("div",{className:"eg-synthoptions",children:[Object(p.jsx)(q,{currentTone:i,onSetTone:l}),Object(p.jsx)(A,{active:j,setActive:m})]})},R=(n(31),["c","d","f","g","a"]),F=d(16).map((function(e){return"".concat(R[e%R.length]).concat(Math.floor(e/R.length)+4)})).flat(),H=function(){return Array.from(Array(16),(function(){return new Array(16).fill(0)}))};var K=function(){var e=Object(c.useState)(H()),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(0),s=Object(o.a)(a,2),u=s[0],b=s[1];return Object(p.jsxs)("div",{className:"eg-app",children:[Object(p.jsx)(I,{scale:F.map(l),sequence:n,onTick:function(e){b(e)}}),Object(p.jsx)(O,{keyrange:16,notes:n,onToggleNote:function(e,t,n){r((function(c){var r=Object(i.a)(c);return r[e][t]=n,r}))},hilightStep:u,onClear:function(){return r(H())}}),Object(p.jsx)(y,{})]})};s.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(K,{})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.318ca471.chunk.js.map