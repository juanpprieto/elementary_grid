(this.webpackJsonpelementary_grid=this.webpackJsonpelementary_grid||[]).push([[0],{24:function(e,t,n){},26:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var r,c=n(4),a=n.n(c),o=n(18),u=n.n(o),s=n(14),i=n(0),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=1/(e/60);return 4*n/t*1e3},f=function(e){var t=["c","c#","d","d#","e","f","f#","g","g#","a","a#","b"],n=e.split(""),r=Object(i.a)(n,2),c=r[0],a=r[1];return t.indexOf(c)<0?-1:12*Number(a)+t.indexOf(c)},b=function(e){return e<0?0:440*Math.pow(2,(e-69)/12)},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(s.a)(Array.from(Array(e).keys()).map((function(e){return e+t})))},j=n(3),h=n(15),m=n(19),g=n.n(m),p=(n(24),n(2)),O=function(e){var t=e.hasHilight,n=e.note,r=e.onToggle,c=e.state,a=e.step,o=Object(h.a)(e,["hasHilight","note","onToggle","state","step"]),u=g()({"gs-key":!0,"gs-key--is-active":c,"gs-key--has-hilight":t}),s={"--step":a,"--note":n};return Object(p.jsx)("div",Object(j.a)({className:u,style:s,onClick:function(){return r(n)}},o))},v=function(e){var t=[];return d(e.length).forEach((function(n){d(e[0].length).forEach((function(r){var c=1===e[n][r];t.push({key:"".concat(n,"_").concat(r,"_").concat(c?"on":"off"),note:n,step:r,state:c})}))})),t},x=function(e){var t=e.notes,n=e.hilightStep,r=e.onToggleNote,a=e.onClear,o=Object(c.useState)("none"),u=Object(i.a)(o,2),s=u[0],l=u[1],f=function(){return l("none")};Object(c.useEffect)((function(){return document.addEventListener("mouseup",f),function(){document.removeEventListener("mouseup",f)}}));var b={"--columns":t[0].length,"--rows":t.length},d={"--cursor":n};return Object(p.jsxs)("div",{className:"gs-grid",children:[Object(p.jsxs)("div",{className:"gs-grid__field",style:b,children:[v(t).map((function(e){var n=e.key,c=e.note,a=e.step,o=e.state;return Object(p.jsx)(O,{note:c,step:a,state:o,onToggle:function(){return r(c,a,o?0:1)},onMouseEnter:function(){return"none"!==s&&function(e,n){"fill"===s&&0===t[e][n]&&r(e,n,1),"clear"===s&&1===t[e][n]&&r(e,n,0)}(c,a)},onMouseDown:function(){return function(e,n){0===t[e][n]?(r(e,n,1),l("fill")):(r(e,n,0),l("clear"))}(c,a)}},n)})),Object(p.jsx)("div",{className:"gs-grid__cursor",style:d})]}),Object(p.jsx)("div",{className:"gs-grid__toolbar",children:Object(p.jsx)("button",{onClick:a,children:"Clear"})})]})},y=(n(26),function(){return Object(p.jsxs)("div",{className:"splainer",children:[Object(p.jsxs)("span",{children:["Made with ",Object(p.jsx)("a",{href:"https://www.elementary.audio/",children:"Elementary Audio"})]}),Object(p.jsxs)("span",{children:["Source on ",Object(p.jsx)("a",{href:"https://github.com/teetow/elementary_grid",children:"GitHub"})]}),Object(p.jsxs)("span",{children:["Check out my ",Object(p.jsx)("a",{href:"https://soundcloud.com/teetow",children:"SoundCloud"})," =)"]})]})}),k=n(5),w=n.n(k),C=n(10),E=n(1);function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return E.b.mul(t,E.b.add(E.b.sin(E.b.mul(2*Math.PI,e)),E.b.sin(E.b.mul(3*Math.PI,e,.05))))}r||(console.log("creating a new AudioContext"),r=new AudioContext);var M=function(e){var t=e.scale,n=e.sequence,a=e.onMetro;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:120,a=arguments.length>3?arguments[3]:void 0,o=Object(c.useState)(!1),u=Object(i.a)(o,2),s=u[0],f=u[1],b=Object(c.useRef)(E.b.metro({name:"tick",interval:l(n,16)})),j=Object(c.useRef)(E.b.metro({name:"sync",interval:l(n,1)})),h=Object(c.useRef)(0);Object(c.useEffect)((function(){!function(){var e=Object(C.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.initialize(r,{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[4]});case 2:e.sent.connect(r.destination),f(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),Object(c.useEffect)((function(){E.a.on("metro",(function(e){"sync"===e.source&&(h.current=-1),"tick"===e.source&&(h.current=h.current+1,a(h.current))}))}),[]);var m=Object(c.useCallback)(Object(C.a)(w.a.mark((function c(){var a,o,u,i,f,h;return w.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if("suspended"!==r.state){c.next=3;break}return c.next=3,r.resume();case 3:if(s&&"running"===r.state)try{a=function(t){return E.b.seq({seq:e[t],loop:!1},b.current,j.current)},o=function(e){return E.b.adsr(.01,.3,.1,1,a(e))},u=function(e){return E.b.add(E.b.mul(_(E.b.phasor(1.005*t[e]),.5)),E.b.mul(_(E.b.phasor(.995*t[e]),.5)))},i=function(e){return E.b.mul(o(e),u(e))},f=E.b.add(E.b.add(d(4,0).map(i)),E.b.add(d(4,4).map(i)),E.b.add(d(4,8).map(i)),E.b.add(d(4,12).map(i))),h=E.b.delay({size:44100},E.b.ms2samps(3*l(n,16)),-.3,f),f=E.b.add(E.b.mul(.5,f),E.b.mul(.15,h)),E.a.render(f,f,E.b.mul(0,b.current),E.b.mul(0,j.current))}catch(m){console.log(m)}case 4:case"end":return c.stop()}}),c)}))),[n,s,e,t]);Object(c.useEffect)((function(){m()}),[m,e])}(n,t.map(b),120,a),Object(p.jsx)(p.Fragment,{})},N=(n(30),["c","d","f","g","a"]),S=d(16).map((function(e){return"".concat(N[e%N.length]).concat(Math.floor(e/N.length)+4)})).flat(),A=function(){return Array.from(Array(16),(function(){return new Array(16).fill(0)}))};var T=function(){var e=Object(c.useState)(A()),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(0),o=Object(i.a)(a,2),u=o[0],l=o[1];return Object(p.jsxs)("div",{className:"eg-app",children:[Object(p.jsx)(M,{scale:S.map(f),sequence:n,onMetro:function(e){l(e)}}),Object(p.jsx)(x,{keyrange:16,notes:n,onToggleNote:function(e,t,n){r((function(r){var c=Object(s.a)(r);return c[e][t]=n,c}))},hilightStep:u,onClear:function(){return r(A())}}),Object(p.jsx)(y,{})]})};u.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(T,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.4b3acf2f.chunk.js.map